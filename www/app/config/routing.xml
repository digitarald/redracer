<?xml version="1.0" encoding="UTF-8"?>
<configurations xmlns="http://agavi.org/agavi/1.0/config">
	<configuration>
		<routes>

			<route name="feed" pattern="/feed$" stop="false" cut="true" output_type="rss" />

			<route name="account" pattern="^/account" module="Account">
				<route name=".edit" pattern="^$" action="Edit" />
				<route name=".login" pattern="^/in(/{login_token:[a-z0-9]{32}})?$" action="Login" />
				<route name=".login_response" pattern="^/auth$" action="LoginResponse" />
				<route name=".logout" pattern="^/out$" action="Logout" />

				<route name=".submit" pattern="^/submit$" module="Hub" action="Submit" />
			</route>

			<route name="hub" pattern="^/resources" module="Hub">
				<route name=".index" pattern="^(/type/{type:[a-z]+})?(/by/{sort:[a-z]+})?(/tag/{tag:[a-z_]+})?$" action="Index" />
				<route name=".resource" pattern="^/(ident:[a-z0-9-_]+)" action="View">
					<route name=".edit" pattern="^/edit$" action="Edit" />
					<route name=".claim" pattern="^/claim$" action="Claim" />
					<route name=".contributor" pattern="^/contributor(/{id:\d+})?">
						<route name=".edit" pattern="^/edit$" action="ContributorEdit" />
					</route>
					<route name=".link" pattern="^/link(/{id:\d+})?">
						<route name=".edit" pattern="^/edit$" action="LinkEdit" />
					</route>
					<route name=".release" pattern="^/release(/{id:\d+})?">
						<route name=".edit" pattern="^/edit$" action="ReleaseEdit" />
					</route>
				</route>
			</route>

			<route name="people" pattern="^/people" module="People">
				<route name=".index" pattern="^$" action="Index">
					<route name=".feed" pattern="^feed/$" output_type="rss" />
				</route>
				<route name=".profile" pattern="^/(id:\d+)(-{name:[^/]+})?" action="View" />
			</route>

			<route name="pages" pattern="^/pages/(name:[a-z0-9-_]+)$" module="Default" action="Page" />

			<route name="backend" pattern="^/backend" module="Backend">
				<route name=".build" pattern="^/build$" action="Build" />
			</route>

			<route name="index" pattern="^/$" module="%actions.default_module%" action="%actions.default_action%" />
		</routes>
	</configuration>
</configurations>